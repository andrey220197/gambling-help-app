"""
Скрипт для заполнения базы данных научными статьями.
Запуск: python -m app.db.seed_articles
"""
import asyncio
import aiosqlite

ARTICLES = [
    {
        "title": "Как работает мотивационная система",
        "category": "dopamine",
        "content": """Дофамин — не «гормон удовольствия», а молекула мотивации и предвкушения. 

Когда ты видишь рекламу казино или слышишь звук игрового автомата, мозг выбрасывает дофамин ДО получения награды. Это создаёт тягу — желание действовать.

Проблема: при регулярной игре мозг привыкает к высоким выбросам дофамина. Обычные радости (еда, общение, хобби) перестают так же сильно активировать систему вознаграждения.

Хорошая новость: нейропластичность работает в обе стороны. При отказе от игры чувствительность постепенно восстанавливается за 3-6 месяцев."""
    },
    {
        "title": "Почему мозг любит неопределённость",
        "category": "dopamine",
        "content": """Исследования показали: неопределённый результат вызывает больший выброс дофамина, чем гарантированная награда.

Это эволюционный механизм: наши предки выживали, исследуя неизвестное. Мозг вознаграждает за «возможно, там что-то есть».

Казино и букмекеры эксплуатируют эту особенность: переменное подкрепление (иногда выигрыш, иногда нет) — самый аддиктивный тип стимуляции.

Понимание этого механизма помогает: ты не «слабовольный» — твой мозг реагирует именно так, как задумано природой. Просто эта система взломана."""
    },
    {
        "title": "Эффект почти-победы",
        "category": "cognitive",
        "content": """«Почти выиграл» воспринимается мозгом почти как победа — с похожим выбросом дофамина.

Это когнитивная ловушка: в реальности «почти» = проигрыш. Но мозг интерпретирует это как «я был близко, значит, скоро получится».

Игровая индустрия специально создаёт множество почти-побед. В слотах барабаны останавливаются на символ выше или ниже выигрышной комбинации чаще, чем случайно.

Осознание: каждый раз, когда думаешь «почти получилось», напоминай себе — это запрограммированная иллюзия."""
    },
    {
        "title": "Сенситизация: как мозг закрепляет привычки",
        "category": "habits",
        "content": """Сенситизация — усиление реакции мозга на определённые стимулы при повторении.

Со временем всё, что связано с игрой (звуки, места, эмоции), начинает автоматически запускать тягу. Это не сознательное желание — это условный рефлекс.

Поэтому так важно избегать триггеров в начале восстановления: каждый контакт со стимулом усиливает нейронную связь.

Со временем без подкрепления эти связи ослабевают. Но они не исчезают полностью — поэтому риск срыва остаётся даже через годы."""
    },
    {
        "title": "Сдвиг от мотивации к привычке",
        "category": "habits",
        "content": """В начале человек играет ради удовольствия и выигрыша (мотивация).

Со временем поведение становится автоматическим — играешь уже не ради кайфа, а потому что «так надо» или чтобы избежать дискомфорта.

Это переход от вентральной к дорсальной части стриатума — от «хочу» к «должен».

Восстановление требует создания новых автоматизмов. Нужно сознательно формировать альтернативные привычки, пока они не станут такими же автоматическими."""
    },
    {
        "title": "Триггеры и внешние сигналы",
        "category": "triggers",
        "content": """Триггеры — это внешние или внутренние сигналы, запускающие тягу.

Внешние: места, люди, реклама, звуки, время суток.
Внутренние: эмоции (скука, стресс, одиночество), физические состояния (усталость, голод).

Первый шаг — осознать свои триггеры. Веди дневник: что происходило перед тягой?

Второй шаг — планирование. Заранее реши, что будешь делать при встрече с триггером. «Если увижу рекламу казино — позвоню другу»."""
    },
    {
        "title": "Почему эмоции усиливают тягу",
        "category": "emotions",
        "content": """Стресс, тревога и негативные эмоции снижают активность префронтальной коры — части мозга, отвечающей за самоконтроль.

Одновременно усиливается активность миндалины и системы вознаграждения. Мозг ищет быстрый способ облегчения — и «помнит», что игра давала это.

Это не слабость воли — это нейробиология.

Стратегия: не принимай решений в эмоциональном состоянии. Сначала снизь уровень стресса (дыхание, прогулка), потом думай."""
    },
    {
        "title": "Эффект контрастности",
        "category": "cognitive",
        "content": """Мозг оценивает не абсолютные значения, а изменения относительно базового уровня.

Большой выигрыш создаёт пик удовольствия. После этого обычная жизнь кажется «серой» — контраст слишком велик.

Это толкает искать повторения пикового опыта, хотя в среднем игра приносит убытки.

Восстановление — это калибровка системы вознаграждения. Маленькие радости снова начинают ощущаться, когда мозг отвыкает от экстремальных стимулов."""
    },
    {
        "title": "Накопительная усталость мозга",
        "category": "emotions",
        "content": """Самоконтроль — ограниченный ресурс. Каждое сопротивление тяге истощает префронтальную кору.

К вечеру, после стрессового дня или при недосыпе способность контролировать импульсы падает.

Поэтому срывы чаще случаются вечером, в выходные, после конфликтов или усталости.

Стратегия: не полагайся только на силу воли. Убирай триггеры из окружения, планируй альтернативные занятия заранее, следи за базовыми потребностями (сон, еда)."""
    },
    {
        "title": "Как работает пауза 10 минут",
        "category": "techniques",
        "content": """Тяга — как волна. Она нарастает, достигает пика и спадает. Обычно пик длится 10-20 минут.

Если переждать этот пик без действия, интенсивность тяги снижается.

Техника «10 минут»: при сильной тяге поставь таймер и дай себе обещание — не принимать решение до сигнала. Просто подожди.

За это время активируется префронтальная кора, снижается эмоциональный накал, появляется пространство для осознанного выбора."""
    },
]


async def seed_articles():
    """Заполняет базу статьями."""
    async with aiosqlite.connect("./app.db") as db:
        # Очищаем таблицу
        await db.execute("DELETE FROM articles")
        
        # Вставляем статьи
        for i, article in enumerate(ARTICLES):
            await db.execute(
                """
                INSERT INTO articles (title, content, category, order_index)
                VALUES (?, ?, ?, ?)
                """,
                (article["title"], article["content"], article["category"], i)
            )
        
        await db.commit()
        print(f"✅ Добавлено {len(ARTICLES)} статей")


if __name__ == "__main__":
    asyncio.run(seed_articles())
